name: Matrix Build
on:
  push:
    branches:
      - main

jobs:
    build_java:
      strategy:
        max-parallel: 2
        matrix:
          os: [ubuntu-latest, windows-latest, macos-latest]
      runs-on: ${{ matrix.os }}
      steps:
        - name: Checkout code
          uses: actions/checkout@v4
        - name: Set up JDK 21
          uses: actions/setup-java@v4
          with:
            java-version: '21'
            distribution: 'temurin'
            cache: 'gradle'
        - name: Grant execute permission to gradlew
          run: chmod +x gradlew
        - name: Build with Gradle
          run: ./gradlew build
        - name: Upload artifact
          uses: actions/upload-artifact@v4
          with:
              name: java-app
              path: build/libs/*.jar
              retention-days: 1
        - name: Use Variables & Secrets
          run: |
            echo "Repository Variable is ${{ vars.VAR_HARIS }}"
            echo "Repository Secret is ${{ secrets.SECRET_HARIS }}"
